<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Week 10 triviaApp Categories</title>
    <meta name="description" content="WDD 330 Week 10 triviaApp progress">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./favicon.ico" rel="icon" type="image/x-icon" />
    <link href="css/styles.css" rel="stylesheet">
</head>

<body>
    <a class="mainLink" href="index.html">
        <header class="mainLink-header">
            <img class="mainLink-icon" src="images/brain50px.png" alt="simple drawing of brain with a splash of color">
            <h1 class="mainLink_title">Can your brain<br>Weather this storm?</h1>
        </header>
    </a>
    <main>
        <section class="categoriesContainer">
            <h2>Choose Your Category</h2>
            <ul id="categories"></ul>
        </section>
    </main>
    <!-- <script src="js/main.js" type="module"></script> -->
    <script>
        let categoryParent = document.getElementById('categories');
        let categoryList = [];

        function fetchCategory() {
                return fetch(`https://opentdb.com/api.php?amount=1&type=multiple`)
                    .then(response => response.json())
                    .then(data => data.results[0])
            }

            async function createCategoryList(list, listLength){
                let categoryNames = [];
                for (let i = 0; i < listLength;){
                    let category = await fetchCategory(); 
                    if (!categoryNames.includes(category["category"])) {
                        list.push(category);
                        categoryNames.push(category["category"]);
                        i++; 
                    }
                }
            }

            function setCategories(list, parent) {
                list.forEach(item => {
                    let li = document.createElement('li');
                    li.innerText = item["category"];
                    parent.appendChild(li);
                });
            }

            createCategoryList(categoryList, 6);
            setCategories(categoryList, categoryParent);
    </script>
</body>

</html>